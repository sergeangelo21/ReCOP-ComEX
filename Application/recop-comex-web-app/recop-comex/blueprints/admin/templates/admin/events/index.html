{% extends "admin-base.html" %}s

{% block content %}
			<div class="notification gold">
				<div class="columns is-centered">
					<div class="column view-icons is-2">
						<article class="media">
						  	<figure class="media-left"> 
						  		<a class="button add" href="{{url_for('admin.events_create')}}" ><i class="fas fa-plus-circle"> </i>&nbsp Add</a>
						  		<a class="button viewbtn is-active" href="{{url_for('admin.events', status='all', page='1', search=' ')}}">
									<span class="icon">
										<i class="fa fa-list"></i>
									</span>
								</a>
								<a class="button viewbtn" href="{{url_for('admin.events_calendar')}}">
									<span class="icon">
										<i class="fa fa-calendar-alt"></i>
									</span>
								</a>
						  	</figure>
						</article>
					</div>

					<div class="column">
						<div class="tabs proposal is-toggle has-text-weight-bold is-centered">
						  <ul>
						    <li {% if status=='all' %} class="is-active" {% endif %}>
						      <a href="{{url_for('admin.events', status='all', page='1', search=search)}}">
						        <span class="icon is-small"><i class="fas fa-list-ul" aria-hidden="true"></i></span>
						        <span class="proposal">All</span>
						      </a>
						    </li>
						    <li {% if status=='new' %} class="is-active" {% endif %}>
						      <a href="{{url_for('admin.events', status='new', page='1', search=search)}}">
						        <span class="icon is-small"><i class="fas fa-calendar-plus" aria-hidden="true"></i></span>
						        <span class="prop">New</span>
						      </a>
						    </li>
						    <li {% if status=='pending' %} class="is-active" {% endif %}>
						      <a href="{{url_for('admin.events', status='pending', page='1', search=search)}}">
						        <span class="icon is-small"><i class="fas fa-file-signature" aria-hidden="true"></i></span>
						        <span class="prop">Pending</span>
						      </a>
						    </li>
						    <li {% if status=='scheduled' %} class="is-active" {% endif %}>
						      <a href="{{url_for('admin.events', status='scheduled', page='1', search=search)}}">
						        <span class="icon is-small"><i class="fas fa-calendar-alt" aria-hidden="true"></i></span>
						        <span class="prop">Scheduled</span>
						      </a>
						    </li>
						    <li {% if status=='declined' %} class="is-active" {% endif %}>
						      <a href="{{url_for('admin.events', status='declined', page='1', search=search)}}">
						        <span class="icon is-small"><i class="fas fa-calendar-times" aria-hidden="true"></i></span>
						        <span class="prop">Declined</span>
						      </a>
						    </li>
						    <li {% if status=='cancelled' %} class="is-active" {% endif %}>
						      <a href="{{url_for('admin.events', status='cancelled', page='1', search=search)}}">
						        <span class="icon is-small"><i class="fas fa-calendar-times" aria-hidden="true"></i></span>
						        <span class="prop">Cancelled</span>
						      </a>
						    </li>
						    <li {% if status=='finished' %} class="is-active" {% endif %}>
						      <a href="{{url_for('admin.events', status='finished', page='1', search=search)}}">
						        <span class="icon is-small"><i class="fas fa-calendar-check" aria-hidden="true"></i></span>
						        <span>Finished</span>
						      </a>
						    </li>
						  </ul>
						</div>
					</div>

					<div class="column search-box">
						<div class="field is-pulled-right has-addons has-addons-centered">
							<div class="control">
								<form action="" method="POST">
								{{form.hidden_tag()}}
						    		{{form.search(class_='input', placeholder='Search')}}
							</div>
							<p class="control">
						     	{{form.submit(class_='button search')}}
							</p>
							</form>
						</div>
					</div>
				</div>
			</div>

			<div class="columns is-gapless">
				<div class="column is-2">
					<div class="filter-btn is-size-5" onclick="filtershrink()">
						<i class="fas fa-filter"></i>&nbspFilter
					</div>
		    		<div class="notification filter" id="filterDIV">
		    			<div class="columns">
			                <div class="column">
			                	<p class="title is-size-5">Thrust</p>
			                  	<div class="field">
									<div class="control">
								    	<div class="select is-warning">
									    	<select class="filter-dropdown">
										        <option>All</option>
										        <option>Educational</option>
										        <option>Environmental</option>
										        <option>Health</option>
										        <option>Livelihood</option>
										        <option>Socio-Political</option>
										        <option>Spiritual</option>
									      	</select>
								    	</div>
								  	</div>
								</div>
			                	
			                	<p class="title is-size-5">Type</p>

			                  	<div class="field">
									<div class="control">
								    	<div class="select is-warning">
									    	<select class="filter-dropdown">
										        <option>All</option>
										        <option>Institutional</option>
										        <option>Outside</option>
									      	</select>
								    	</div>
								  	</div>
								</div>
			                </div>
			            </div>
					 	
		    		</div>
		    	</div>

				<div class="column">
					<div class="card list">
						<div class="card-header">
							<p class="card-header-title">
								<span class="fas fa-poll-h"></span>&nbsp;
								{% if search!=' ' %}
								You searched for &nbsp;
								<span class="search-highlight">
									&nbsp;'{{search}}'
									<a href="{{url_for('admin.events', status=status, page='1',search=' ')}}"><span class="fas fa-times-circle"></span></a>&nbsp;
								</span>
								&nbsp; in
								{% endif %}
								{{status | title}} Events
							</p>
							<div class="is-pulled-right">
								<p class="card-header-title">
									Showing record(s) 
									   {{events.page}} - 
									   {{(events.per_page+events.total-events.per_page) }}  
									of {{events.total}}
								</p>
							</div>
						</div>
						<div class="card-content">
							<div class="table-responsive">
								<table class="table is-fullwidth is-striped is-hoverable">
									{% if events %}
									<thead>
										<tr>
											<th class="newlist">ID</th>
										    <th class="newlist">Event Name</th>
										    <th class="newlist">Organizer</th>
										    <th class="newlist">Target Date</th>
										   	{% if status=='all' or status=='pending' %}<th class="newlist">Status</th>{% endif %}
										    <th class="newlist hidedesktop">Actions</th>
										 </tr>
										
									</thead>
									<tbody>

										{% for event in events.items %}
											{% include 'admin/events/_events.html' %}
										{% endfor %}
									</tbody>
									{% else %}

									<tbody>

										<tr class = "table-row">
											<td class = "has-text-centered">---Nothing to show---</td>
									 	</tr>
										
									</tbody>

									{% endif %}


								</table>
							</div>
							<br>
							<nav class="pagination" role="navigation" aria-label="pagination">
  								<a class="pagination-previous" href="{{url_for('admin.events', status=status, search=search, page=events.prev_num|string)}}" {% if not events.has_prev %} disabled {% endif %}>Previous</a>
  								<a class="pagination-next" href="{{url_for('admin.events', status=status, search=search, page=events.next_num|string)}}" {% if not events.has_next %} disabled {% endif %}>Next page</a>
  								<ul class="pagination-list">
  									{% for no in page_nos %}
									<li>
  										<a class="pagination-link {% if page==no %}is-current{% endif %}" >{{no}}</a>
									</li>
									{% endfor %}
								</ul>
							</nav>
						</div>
					</div>
				</div>	
			</div>
{% endblock %}